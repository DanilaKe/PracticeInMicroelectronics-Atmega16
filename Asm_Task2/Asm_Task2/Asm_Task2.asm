.INCLUDE "m16def.inc"
.LIST
.CSEG
.ORG 0x0000
.equ DELAY = 0xFF
LDI R16,LOW(RAMEND)
OUT SPL,R16
LDI R16,HIGH(RAMEND)
OUT SPH,R16
LDI R16,0b11111111
OUT DDRA,R16
OUT DDRB,R16
OUT DDRC,R16 
MAIN:
    CLR R17
	LDI R16,0xFF
    OUT DDRD,R17   
	IN R18,PIND
    SBRC R18,0
    RCALL ZERO
	IN R18,PIND
    SBRC R18,1
    RCALL ONE
	IN R18,PIND
    SBRC R18,2
    RCALL TWO
	IN R18,PIND
    SBRC R18,3
    RCALL THREE
	IN R18,PIND
    SBRC R18,4
    RCALL FOUR
	IN R18,PIND
    SBRC R18,5
    RCALL FIVE
	IN R18,PIND
    SBRC R18,6
    RCALL SIX
	IN R18,PIND
    SBRC R18,7
    RCALL SEVEN
    RJMP MAIN
ZERO:  
	OUT DDRD,R16     
	SBI PORTA,2
	SBI PORTA,3
	SBI PORTA,4
	SBI PORTA,5
	SBI PORTD,2
	SBI PORTD,3
	SBI PORTD,4
	SBI PORTD,5
	SBI PORTB,1
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,6
    OUT DDRD,R17
	IN R18,PIND
    SBRC R18,0
	RCALL ZERO
	CBI PORTA,2
	CBI PORTA,3
	CBI PORTA,4
	CBI PORTA,5
	CBI PORTD,2
	CBI PORTD,3
	CBI PORTD,4
	CBI PORTD,5
	CBI PORTB,1
	CBI PORTB,6
	CBI PORTC,1
	CBI PORTC,6
    RETI
ONE:
	OUT DDRD,R16     
	SBI PORTA,3
	SBI PORTA,6
	SBI PORTB,2
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,2
	SBI PORTC,3
	SBI PORTC,4
	SBI PORTC,5
	SBI PORTC,6
	SBI PORTD,6
    OUT DDRD,R17
	IN R18,PIND
    SBRC R18,1
	RCALL ONE
	CBI PORTA,3
	CBI PORTA,6
	CBI PORTB,2
	CBI PORTB,6
	CBI PORTC,1
	CBI PORTC,2
	CBI PORTC,3
	CBI PORTC,4
	CBI PORTC,5
	CBI PORTC,6
	CBI PORTD,6
    RETI
TWO:
	OUT DDRD,R16     
	SBI PORTA,2
	SBI PORTA,5
	SBI PORTA,6
	SBI PORTB,1
	SBI PORTB,4
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,3
	SBI PORTC,6
	SBI PORTD,2
	SBI PORTD,6
    OUT DDRD,R17
	IN R18,PIND
    SBRC R18,2
	RCALL TWO
	CBI PORTA,2
	CBI PORTA,5
	CBI PORTA,6
	CBI PORTB,1
	CBI PORTB,4
	CBI PORTB,6
	CBI PORTC,1
	CBI PORTC,3
	CBI PORTC,6
	CBI PORTD,2
	CBI PORTD,6
    RETI
THREE:
	OUT DDRD,R16     
	SBI PORTA,2
	SBI PORTA,5
	SBI PORTB,1
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,3
	SBI PORTC,4
	SBI PORTC,6
	SBI PORTD,2
	SBI PORTD,5
    OUT DDRD,R17
	IN R18,PIND
    SBRC R18,3
	RCALL THREE
	CBI PORTA,2
	CBI PORTA,5
	CBI PORTB,1
	CBI PORTB,6
	CBI PORTC,1
	CBI PORTC,3
	CBI PORTC,4
	CBI PORTC,6
	CBI PORTD,2
	CBI PORTD,5
    RETI
FOUR:
	OUT DDRD,R16     
	SBI PORTA,1
	SBI PORTA,2
	SBI PORTA,3
	SBI PORTB,3
	SBI PORTC,3
	SBI PORTD,1
	SBI PORTD,2
	SBI PORTD,3
	SBI PORTD,4
	SBI PORTD,5
	SBI PORTD,6
    OUT DDRD,R17
	IN R18,PIND
    SBRC R18,4
	RCALL FOUR
	CBI PORTA,1
	CBI PORTA,2
	CBI PORTA,3
	CBI PORTB,3
	CBI PORTC,3
	CBI PORTD,1
	CBI PORTD,2
	CBI PORTD,3
	CBI PORTD,4
	CBI PORTD,5
	CBI PORTD,6
    RETI
FIVE:
	OUT DDRD,R16     
	SBI PORTA,1
	SBI PORTA,2
	SBI PORTA,3
	SBI PORTA,5
	SBI PORTB,1
	SBI PORTB,3
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,3
	SBI PORTC,6
	SBI PORTD,1
	SBI PORTD,4
	SBI PORTD,5
    OUT DDRD,R17
	IN R18,PIND
    SBRC R18,5
	RCALL FIVE
	CBI PORTA,1
	CBI PORTA,2
	CBI PORTA,3
	CBI PORTA,5
	CBI PORTB,1
	CBI PORTB,3
	CBI PORTB,6
	CBI PORTC,1
	CBI PORTC,3
	CBI PORTC,6
	CBI PORTD,1
	CBI PORTD,4
	CBI PORTD,5
    RETI
SIX:
	OUT DDRD,R16     
	SBI PORTA,2
	SBI PORTA,3
	SBI PORTA,4
	SBI PORTA,5
	SBI PORTB,1
	SBI PORTB,4
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,4
	SBI PORTC,6
	SBI PORTD,2
	SBI PORTD,5
    OUT DDRD,R17
	IN R18,PIND
    SBRC R18,6
	RCALL SIX
	CBI PORTA,2
	CBI PORTA,3
	CBI PORTA,4
	CBI PORTA,5
	CBI PORTB,1
	CBI PORTB,4
	CBI PORTB,6
	CBI PORTC,1
	CBI PORTC,4
	CBI PORTC,6
	CBI PORTD,2
	CBI PORTD,5
    RETI
SEVEN:
	OUT DDRD,R16     
	SBI PORTA,1
	SBI PORTB,1
	SBI PORTB,4
	SBI PORTB,5
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,3
	SBI PORTD,1
	SBI PORTD,2
    OUT DDRD,R17
	IN R18,PIND
    SBRC R18,7
	RCALL SEVEN
	CBI PORTA,1
	CBI PORTB,1
	CBI PORTB,4
	CBI PORTB,5
	CBI PORTB,6
	CBI PORTC,1
	CBI PORTC,3
	CBI PORTD,1
	CBI PORTD,2
    RETI