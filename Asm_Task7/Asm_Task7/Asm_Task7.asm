.INCLUDE "m16def.inc"
.LIST
.CSEG
.ORG 0x0000
.equ DELAY = 0xFF
LDI R16,LOW(RAMEND)
OUT SPL,R16
LDI R16,HIGH(RAMEND)
OUT SPH,R16
LDI R16,0b11111111
OUT DDRA,R16
OUT DDRB,R16
OUT DDRD,R16 
MAIN:
    LDI R17,0b11110000
    OUT DDRC,R17
	LDI R17,0b10000000
	OUT PORTC,R17   
	IN R18,PINC
    SBRC R18,3
    RCALL ONE
	IN R18,PINC
    SBRC R18,2
    RCALL TWO
	IN R18,PINC
    SBRC R18,1
    RCALL THREE
	IN R18,PINC
    SBRC R18,0
    RCALL A
	LDI R17,0b01000000
	OUT PORTC,R17   
	IN R18,PINC
    SBRC R18,3
    RCALL FOUR
	IN R18,PINC
    SBRC R18,2
    RCALL FIVE
	IN R18,PINC
    SBRC R18,1
    RCALL SIX
	IN R18,PINC
    SBRC R18,0
    RCALL B
	LDI R17,0b00100000
	OUT PORTC,R17   
	IN R18,PINC
    SBRC R18,3
    RCALL SEVEN
	IN R18,PINC
    SBRC R18,2
    RCALL EIGHT
	IN R18,PINC
    SBRC R18,1
    RCALL NINE
	IN R18,PINC
    SBRC R18,0
    RCALL C
	LDI R17,0b00010000
	OUT PORTC,R17   
	IN R18,PINC
    SBRC R18,3
    RCALL STAR
	IN R18,PINC
    SBRC R18,2
    RCALL ZERO
	IN R18,PINC
    SBRC R18,1
    RCALL SHARP
	IN R18,PINC
    SBRC R18,0
    RCALL D
    RJMP MAIN
ZERO:  
	OUT DDRC,R16     
	SBI PORTA,2
	SBI PORTA,3
	SBI PORTA,4
	SBI PORTA,5
	SBI PORTD,2
	SBI PORTD,3
	SBI PORTD,4
	SBI PORTD,5
	SBI PORTB,1
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,6
    RCALL WAIT
	CBI PORTA,2
	CBI PORTA,3
	CBI PORTA,4
	CBI PORTA,5
	CBI PORTD,2
	CBI PORTD,3
	CBI PORTD,4
	CBI PORTD,5
	CBI PORTB,1
	CBI PORTB,6
	CBI PORTC,1
	CBI PORTC,6
    RJMP MAIN
ONE:
	OUT DDRC,R16
	LDI R19,0b01001000
	OUT PORTA,R19
	LDI R19,0b01000100
	OUT PORTB,R19
	LDI R19,0b01111110
	OUT PORTC,R19
	LDI R19,0b01000010    
	OUT PORTD,R19
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17  
    RETI
TWO:
	OUT DDRC,R16     
	SBI PORTA,2
	SBI PORTA,5
	SBI PORTA,6
	SBI PORTB,1
	SBI PORTB,4
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,3
	SBI PORTC,6
	SBI PORTD,2
	SBI PORTD,6
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17 
    RETI
THREE:
	OUT DDRC,R16     
	SBI PORTA,2
	SBI PORTA,5
	SBI PORTB,1
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,3
	SBI PORTC,4
	SBI PORTC,6
	SBI PORTD,2
	SBI PORTD,5
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17 
    RETI
FOUR:
	OUT DDRC,R16     
	SBI PORTA,1
	SBI PORTA,2
	SBI PORTA,3
	SBI PORTB,3
	SBI PORTC,3
	SBI PORTD,1
	SBI PORTD,2
	SBI PORTD,3
	SBI PORTD,4
	SBI PORTD,5
	SBI PORTD,6
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17
    RETI
FIVE:
	OUT DDRC,R16     
	SBI PORTA,1
	SBI PORTA,2
	SBI PORTA,3
	SBI PORTA,5
	SBI PORTB,1
	SBI PORTB,3
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,3
	SBI PORTC,6
	SBI PORTD,1
	SBI PORTD,4
	SBI PORTD,5
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17
    RETI
SIX:
	OUT DDRC,R16     
	SBI PORTA,2
	SBI PORTA,3
	SBI PORTA,4
	SBI PORTA,5
	SBI PORTB,1
	SBI PORTB,4
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,4
	SBI PORTC,6
	SBI PORTD,2
	SBI PORTD,5
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17
    RETI
SEVEN:
	OUT DDRC,R16     
	SBI PORTA,1
	SBI PORTB,1
	SBI PORTB,4
	SBI PORTB,5
	SBI PORTB,6
	SBI PORTC,1
	SBI PORTC,3
	SBI PORTD,1
	SBI PORTD,2
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17
    RETI
EIGHT:
	OUT DDRC,R16
	LDI R19,0b00100100
	OUT PORTA,R19
	LDI R19,0b01011010
	OUT PORTB,R19
	LDI R19,0b01011010
	OUT PORTC,R19
	LDI R19,0b00100100
	OUT PORTD,R19
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17
    RETI
NINE:
	OUT DDRC,R16
	LDI R19,0b0010100
	OUT PORTA,R19
	LDI R19,0b0101010
	OUT PORTB,R19
	LDI R19,0b0101010
	OUT PORTC,R19
	LDI R19,0b0011100
	OUT PORTD,R19
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17
    RETI
A:
	OUT DDRC,R16
	LDI R19,0b0010100
	OUT PORTA,R19
	LDI R19,0b0101010
	OUT PORTB,R19
	LDI R19,0b0101010
	OUT PORTC,R19
	LDI R19,0b0011100
	OUT PORTD,R19
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17
    RETI
B:
	OUT DDRC,R16
	LDI R19,0b0010100
	OUT PORTA,R19
	LDI R19,0b0101010
	OUT PORTB,R19
	LDI R19,0b0101010
	OUT PORTC,R19
	LDI R19,0b0011100
	OUT PORTD,R19
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17
    RETI
C:
	OUT DDRC,R16
	LDI R19,0b0010100
	OUT PORTA,R19
	LDI R19,0b0101010
	OUT PORTB,R19
	LDI R19,0b0101010
	OUT PORTC,R19
	LDI R19,0b0011100
	OUT PORTD,R19
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17
    RETI
D:
	OUT DDRC,R16
	LDI R19,0b0010100
	OUT PORTA,R19
	LDI R19,0b0101010
	OUT PORTB,R19
	LDI R19,0b0101010
	OUT PORTC,R19
	LDI R19,0b0011100
	OUT PORTD,R19
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17
    RETI
STAR:
	OUT DDRC,R16
	LDI R19,0b0010100
	OUT PORTA,R19
	LDI R19,0b0101010
	OUT PORTB,R19
	LDI R19,0b0101010
	OUT PORTC,R19
	LDI R19,0b0011100
	OUT PORTD,R19
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17
    RETI
SHARP:
	OUT DDRC,R16
	LDI R19,0b0010100
	OUT PORTA,R19
	LDI R19,0b0101010
	OUT PORTB,R19
	LDI R19,0b0101010
	OUT PORTC,R19
	LDI R19,0b0011100
	OUT PORTD,R19
	RCALL WAIT
	CLR R19
	OUT PORTA,R19
	OUT PORTB,R19
	OUT PORTC,R19
	OUT PORTD,R19
	LDI R17,0b11110000
    OUT DDRC,R17
    RETI
WAIT:
	LDI R20, DELAY
LOOP1:
	LDI R21,0X45
LOOP2:
	LDI R22,0x12
LOOP3:
	DEC R22
	BRNE LOOP3
	DEC R21
	BRNE LOOP2
	DEC R20
	BRNE LOOP1
	RET