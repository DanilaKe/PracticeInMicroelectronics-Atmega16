.INCLUDE "m16def.inc"
.LIST
.CSEG
.ORG 0X0000
.equ Delay=100

LDI R16, 0x03 
OUT SPH, R16 
LDI R16, 0xFF 
OUT SPL, R16 
OUT DDRB, R16 
OUT DDRC, R16 
OUT DDRD, R16 
LDI R16, 0b11000011 
OUT ADMUX, R16 
LDI R16, 0b11100110 
OUT ADCSRA, R16 

start: 
IN R16, ADCSRA 
LDI R17, 0b00010000 
AND R17, R16 
CPI R17, 0b00010000 
BREQ CHECK 

RJMP start 

CHECK: 
IN R26, ADCL 
IN R27, ADCH 
CPI R27, 3 
BREQ BLINK3 
CPI R27, 2 
BREQ TwoOrThree 
CPI R27, 1 
BREQ OneOrTwo 
CPI R26, 0b11110110 
//BRLT BLINK0 
RJMP BLINK1 

TwoOrThree: 
CPI R26, 0b11100001 
//BRLT BLINK2 
RJMP BLINK3 

OneOrTwo: 
CPI R26, 0b11101100 
//BRLT BLINK1 
RJMP BLINK2 

BLINK1: 
LDI R29, 0xFF 
LDI R30, 0x00 
OUT PORTD, R29 
OUT PORTC, R30 
OUT PORTB, R30 
LDI R16, 0b11100110 
OUT ADCSRA, R16 
RJMP start 

BLINK2: 
LDI R29, 0xFF 
LDI R30, 0x00 
OUT PORTD, R29 
OUT PORTC, R29 
OUT PORTB, R30 
LDI R16, 0b11100110 
OUT ADCSRA, R16 
RJMP start 

BLINK3: 
LDI R29, 0xFF 
OUT PORTD, R29 
OUT PORTC, R29 
OUT PORTB, R29 
LDI R16, 0b11100110 
OUT ADCSRA, R16 
RJMP start 

BLINK0: 
LDI R29, 0x00 
OUT PORTD, R29 
OUT PORTC, R29 
OUT PORTB, R29 
LDI R16, 0b11100110
OUT ADCSRA, R16 
RJMP start
